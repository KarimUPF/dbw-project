{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<section class="title-section">
    <div id="flash-messages">
        {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}" style="margin-top: 70px;">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
    <div class="container d-flex flex-column justify-content-center align-items-center vh-100 text-center">
        <h1 class="display-4 text-white">Welcome to PTM Nexus!</h1>
        <p class="lead text-white">The First Tool for Post-translational Modifications Analysis</p>
        <a href="#login" class="btn btn-primary mt-3">Get Started</a>  <!-- Scrolls to login -->
    </div>
</section>

<section class="Information py-5">
    <div class="container">
        <h2 class="display-4 text-white text-center mb-5">What is PTM-nexus?</h2>

        <div class="row g-4">
            <div class="col-12">
                <div class="card shadow-lg">
                    <div class="card-body d-flex align-items-center">
                        <div class="flex-grow-1 pe-4">
                            <h3 class="card-title mb-3">Objective</h3>
                            <p class="card-text">
                                Post-translational modifications (PTMs) constitute covalent chemical modifications occurring on proteins subsequent to ribosomal synthesis, critically influencing their functional repertoire, structural integrity, subcellular localization, and interaction networks. PTM Nexus serves as an advanced bioinformatics platform tailored for rigorous comparative analysis of PTMs.
                            </p>
                        </div>
                        <i class="fas fa-bullseye text-primary" style="font-size: 3rem;"></i>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="card shadow-lg">
                    <div class="card-body d-flex align-items-center">
                        <div class="flex-grow-1 pe-4">
                            <h3 class="card-title mb-3">Methodology</h3>
                            <p class="card-text">
                                Users of PTM Nexus may conduct comparative analyses through two distinct methodological pathways: Single UniProt ID Analysis and Multiple UniProt IDs Analysis. The platform performs BLAST queries, multiple sequence alignments, and normalizes PTM positions for comprehensive comparative examination.
                            </p>
                        </div>
                        <i class="fas fa-flask text-primary" style="font-size: 3rem;"></i>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="card shadow-lg">
                    <div class="card-body d-flex align-items-center">
                        <div class="flex-grow-1 pe-4">
                            <h3 class="card-title mb-3">Parameters</h3>
                            <p class="card-text">
                                PTM Nexus offers customizable parameters to optimize comparative PTM analyses, including: UniProt ID input, PTM Type selection, Organism constraints, and adjustable proximity-based matching. The platform provides flexibility in analyzing PTM conservation across different protein sequences.
                            </p>
                        </div>
                        <i class="fas fa-cogs text-primary" style="font-size: 3rem;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- LOGIN AND SIGNUP SECTION -->
<section id="signup"></section>
<section id="login" class="login py-3">
    <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
        <!-- Login Form -->
        <div class="card shadow-lg p-4 rounded-3" id="login-form" style="width: 70%;">
            <h2 class="text-center mb-4">Login</h2>
            <form method="POST" action="{{ url_for('auth.login') }}">
                {{ login_form.hidden_tag() }}
                <div class="mb-3">
                    {{ login_form.username.label(class="form-label") }}
                    {{ login_form.username(class="form-control", placeholder="Enter your username") }}
                </div>
                <div class="mb-3">
                    {{ login_form.password.label(class="form-label") }}
                    {{ login_form.password(class="form-control", placeholder="Enter your password") }}
                </div>
                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
            
            <!-- Sign Up and Forgot Password Links -->
            <div class="mt-3 text-center">
                <a href="#" id="signup-btn" class="btn btn-outline-secondary w-100 mb-2">Sign Up</a>
                <a href="{{ url_for('auth.forgot_password') }}" class="text-muted">Forgot Password?</a>
            </div>
        </div>

        <!-- Signup Form (initially hidden) -->
        <div class="card shadow-lg p-4 rounded-3" id="signup-form" style="width: 600px; display: none;">
            <h2 class="text-center mb-4">Sign Up</h2>
            <form method="POST" action="{{ url_for('auth.signup') }}" style="width: 600px;">
                {{ signup_form.hidden_tag() }}
                <div class="mb-3">
                    {{ signup_form.username.label(class="form-label") }}
                    {{ signup_form.username(class="form-control", placeholder="Enter your username") }}
                </div>
                <div class="mb-3">
                    {{ signup_form.email.label(class="form-label") }}
                    {{ signup_form.email(class="form-control", placeholder="Enter your email") }}
                </div>
                <div class="mb-3">
                    {{ signup_form.password.label(class="form-label") }}
                    {{ signup_form.password(class="form-control", placeholder="Enter your password") }}
                </div>
                <button type="submit" class="btn btn-primary w-100">Sign Up</button>
            </form>
            <div class="mt-3 text-center">
                <a href="#" id="login-btn" class="btn btn-outline-secondary w-100 mb-2">Already have an account? Login</a>
            </div>
        </div>
    </div>
</section>


<section class="Team py-5">
    <div class="container">
        <h2 class="display-4 text-center mb-5 text-white">Meet Our Team</h2>
        <div class="row row-cols-1 row-cols-md-2 g-4">
            <div class="col">
                <div class="card h-100 text-center shadow-lg">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{{ url_for('static', filename='karim.jpg') }}" class="rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                        <h3 class="card-title">Karim Hamed</h3>
                        <h4 class="card-subtitle mb-2 text-muted">Molecular Biologist</h4>
                        <p class="card-text">International Catalan University (UIC), Barcelona</p>
                        <p class="card-text text-muted mt-auto">Database Developer<br>Back-end Developer<br>DevOps Engineer</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card h-100 text-center shadow-lg">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{{ url_for('static', filename='nuria.jpg') }}" class="rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                        <h3 class="card-title">Núria Montalà</h3>
                        <h4 class="card-subtitle mb-2 text-muted">Molecular Biologist</h4>
                        <p class="card-text">Rovira i Virgili University (URV), Tarragona</p>
                        <p class="card-text text-muted mt-auto">UI/UX Designer<br>Database Developer<br>Back-end Developer</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card h-100 text-center shadow-lg">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{{ url_for('static', filename='adam.jpg') }}" class="rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                        <h3 class="card-title">Adam Martí</h3>
                        <h4 class="card-subtitle mb-2 text-muted">Molecular Biologist</h4>
                        <p class="card-text">University of Valencia (UV), Valencia</p>
                        <p class="card-text text-muted mt-auto">UI/UX Designer<br>Database Developer<br>Documentation Specialist</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card h-100 text-center shadow-lg">
                    <div class="card-body d-flex flex-column align-items-center">
                        <img src="{{ url_for('static', filename='maider.jpg') }}" class="rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                        <h3 class="card-title">Maider Fernandez de Mendiola</h3>
                        <h4 class="card-subtitle mb-2 text-muted">Biologist</h4>
                        <p class="card-text">University of Basque Country (UPF/EHU), Leioa</p>
                        <p class="card-text text-muted mt-auto">Front End Developer<br>Project Communication Lead<br>Database Developer</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get elements
    const signupBtn = document.getElementById('signup-btn');
    const loginBtn = document.getElementById('login-btn');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const loginNavLink = document.getElementById('login-link');
    const signupNavLink = document.getElementById('signup-link');
    
    // Function to show login form
    function showLoginForm() {
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
    }
    
    // Function to show signup form
    function showSignupForm() {
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
    }
    
    // Add event listeners for form toggle buttons
    if (signupBtn) {
        signupBtn.addEventListener('click', function(e) {
            e.preventDefault();
            showSignupForm();
        });
    }
    
    if (loginBtn) {
        loginBtn.addEventListener('click', function(e) {
            e.preventDefault();
            showLoginForm();
        });
    }
    
    // Add event listeners for navbar links
    if (loginNavLink) {
        loginNavLink.addEventListener('click', function() {
            // Will scroll to #login due to href
            setTimeout(showLoginForm, 100); // Small delay to ensure it executes after scrolling
        });
    }
    
    if (signupNavLink) {
        signupNavLink.addEventListener('click', function() {
            // Will scroll to #signup due to href
            setTimeout(showSignupForm, 100); // Small delay to ensure it executes after scrolling
        });
    }
    
    // Check for hash in URL on page load or hash change
    function checkHash() {
        if (window.location.hash === '#signup') {
            showSignupForm();
        } else if (window.location.hash === '#login') {
            showLoginForm();
        }
    }
    
    // Check hash on page load
    checkHash();
    
    // Also listen for hashchange events
    window.addEventListener('hashchange', checkHash);
});
</script>
{% endblock %}